<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.itaz.lms.portal.mapper.PortalMapper">

	<select id="selectCommCodeList" parameterType="String"  resultType="PortalVO">
		/*PortalMapper.selectCommCodeList bnso*/
		SELECT
			CODE
			,CODE_NM_kOR
		FROM T_CMMN_BASIS_CODE
		WHERE PARENT_CODE = #{code}
		AND USE_AT = '1'
	</select>

	 <insert id="insertUserInformation" parameterType="PortalVO">
	 	/*PortalMapper.insertUserInformation bnso*/
	 	INSERT INTO T_USER_INFORMATION
	 	(
		 	user_name					/*사용자 명*/
			,user_id					/*사용자 id*/
			,password					/*패스워드*/
			,global_administrator_yn	/*전역관리자 여부*/
			,tel_no						/**/
			,crtfc_sttus				/*인증상태*/
			,creat_id
			,creat_dt
			,creat_ip
		)
		VALUES
		(
			#{userName}
			,#{userId}
			,#{password}
			,'0'
			,#{telNo}
			,'C027002'
			,#{userId}
			,now()
			,#{creatIp}
		)
	 </insert>

	 <select id="selectUserCheck" parameterType="String" resultType="int">
		/*PortalMapper.selectCheckDuplicateEmail bnso*/
	 	SELECT COUNT(*)
	 	FROM T_USER_INFORMATION
	 	WHERE USER_ID = #{userId}
	 </select>


	 <select id="selectUserInfo" parameterType="String" resultType="PortalVO">
		/*PortalMapper.selectUserInfo bnso*/
	 	SELECT
	 		USER_NO
	 		,USER_ID
	 		,PASSWORD
	 		,USER_NAME
	 		,TEL_NO
	 	FROM T_USER_INFORMATION
	 	WHERE USER_ID = #{userId}
	 </select>

	 <insert id="insertTenantInfo" parameterType="PortalVO">
		INSERT INTO T_TENANT
		(
	 		 TENANT_NM_KOR
			 ,TENANT_CL
			 ,TENANT_DTL_CL
			 ,TENANT_NM_KOR
			 ,TENANT_NM_ENG
			 ,TENANT_REPRSNT_ID
			 ,REPRSNT_EMAIL
			 ,ZIP_NO
			 ,ADDRESS
			 ,REPRSNT_TELNO
			 ,CHARGER_MOBILE
			 ,CHARGER_ID
			 ,CHARGER_NM
		)
		VALUES
		(
			#{tenantNmKor}
			,#{tenantCl}
			,#{tenantDtlCl}
			,#{tenantNmKor}
			,#{tenantNmEng}
			,#{tenantReprsntId}
			,#{reprsntEmail}
			,#{zipNo}
			,#{address}
			,#{reprsntTelno}
			,#{chargerMobile}
			,#{chargerId}
			,#{chargerNm}
		)
	 </insert>
	 <select id="selectMyTenantList" parameterType="String" resultType="PortalVO">
	 	/*PortalMapper.selectMyTenantList 나의 테넌트 목록 조회 bnso*/
		select
			tt.TENANT_ID
			,tt.TENANT_NM_KOR
			,tt.TENANT_CL
			,tt.TENANT_DTL_CL
			,tt.TENANT_NM_KOR
			,tt.TENANT_NM_ENG
			,tt.TENANT_REPRSNT_ID
			,tt.REPRSNT_EMAIL
			,tt.ZIP_NO
			,tt.ADDRESS
			,tt.REPRSNT_TELNO
			,tt.CHARGER_MOBILE
			,tt.CHARGER_ID
			,tt.CHARGER_NM
		from t_tenant tt
			,t_tenant_user ttu
			,t_user_information tui
		where TT.TENANT_ID = TTU.TENANT_ID
		and ttu.USER_NO  = tui.user_no
		and TUI.USER_NO = #{userId}
	 </select>

	 <select id="selectMyTenantServiceList" parameterType="String" resultType="PortalVO">
	 	/*PortalMapper.selectUserInfo 나의 테넌트에서 신청한 서비스 목록 조회 bnso*/
	 	select * from t_tenant_svc tts
	 </select>
</mapper>